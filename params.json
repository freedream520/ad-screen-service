{"name":"Ad Screen Service","tagline":"互联网广告屏的后端服务","body":"# 互联网广告屏的后端服务 #\r\n\r\n## 环境依赖 ##\r\n\r\n- mongoDB服务需开启，最好设置为开机启动。\r\n\r\n环境依赖的部署安装，参考：[http://www.localad.org.cn/requisites.html](http://www.localad.org.cn/requisites.html)\r\n\r\n## 部署服务的目录结构 ##\r\n\r\n部署服务需要的目录结构如下：\r\n\r\n- **config：**服务的配置目录\r\n- **ad-screen：**服务的软链接目录。\r\n- **data：**服务的数据存储目录。\r\n\t- **mongodb：**MongoDB的目录。\r\n\t\t- **data：**数据库目录。\r\n\t\t- **log：**日志目录。\r\n- **static：**用于存储上传的广告物料等静态资源。\r\n- **tmp：**上传文件时，用于临时存储。\r\n- **release：**版本发布目录。\r\n\r\n**建议：**可以部署在目标服务器的`/home/localad/ad-screen-service`目录下。\r\n\r\n## 服务部署的方法 ##\r\n\r\n### 克隆和部署 ###\r\n\r\n使用GIT克隆项目代码：\r\n\r\n\tcd /home/localad/ad-screen-service/release\r\n\tgit clone https://github.com/com-localad/ad-screen-service.git ad-screen-service-{版本号} -b {版本号}\r\n\r\n### 建立软连接 ###\r\n\r\n\trm -rf /home/localad/ad-screen-service/ad-screen\r\n\tln -s /home/localad/ad-screen-service/release/ad-screen-service-{版本号} /home/localad/ad-screen-service/ad-screen\r\n\r\n### 配置系统 ###\r\n\r\n第一次部署时，需要复制系统配置文件，并设置：\r\n\r\n\tcp -r /home/localad/ad-screen-service/release/ad-screen-service-{版本号}/dist/config /home/localad/ad-screen-service\r\n\r\n可以使用如下命令，复制mongoDB的存储目录结构：\r\n\r\n\tcp -r /home/localad/ad-screen-service/release/ad-screen-service-{版本号}/dist/data /home/localad/ad-screen-service\r\n\r\n## 启动系统服务 ##\r\n\r\n### Windows测试环境 ###\r\n\r\n进入`dist/ad-screen/bin`目录，使用`shift+右键`，在当前目录打开命令窗口。\r\n\r\n执行命令`node-server.cmd`，启动桩的Web服务（安装NPM包，扫瞄服务模块，启用端口，启用域名）。\r\n\r\n### Linux产品环境 ###\r\n\r\n进入`ad-screen/bin`目录，可以使用以下命令：\r\n\r\n1. `sh server-install.sh`：安装服务框架NPM包，扫瞄服务模块，安装服务模块依赖的NPM包。\r\n2. `sh node-server.sh start`：启动产品环境的Web服务（启用端口，启用域名）。\r\n3. `sh node-server.sh stop`：停止产品环境的Web服务。\r\n4. `sh node-server.sh restart`：重启产品环境的Web服务。\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}